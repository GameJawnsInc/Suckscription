[gd_scene load_steps=9 format=3 uid="uid://ctwns2ijplrrh"]

[ext_resource type="Script" uid="uid://bdtnoj55ox1e" path="res://main/map/overworld/overworld.gd" id="1_oh3n5"]
[ext_resource type="Texture2D" uid="uid://d1p4kwni1clyh" path="res://assets/overworld/loopframe.png" id="2_nlnpo"]
[ext_resource type="PackedScene" uid="uid://cmuvm085e1ahy" path="res://main/ui/nine_patch_panel/nine_patch_panel.tscn" id="3_7cv3s"]
[ext_resource type="Texture2D" uid="uid://df04cbwgu6w00" path="res://assets/overworld/loopfront.png" id="3_lq383"]
[ext_resource type="Script" uid="uid://no8cuhtmmrdl" path="res://main/map/overworld/path_line.gd" id="4_nlnpo"]
[ext_resource type="PackedScene" uid="uid://ccaxx8d4y6wvp" path="res://main/ui/nine_patch_button/nine_patch_button.tscn" id="4_w6wjv"]
[ext_resource type="Script" uid="uid://crb0u8qnkbfst" path="res://main/map/overworld/house_priority_holder.gd" id="5_0bti1"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_nlnpo"]
vertices = PackedVector2Array(700.898, 171.992, 781.617, 175.977, 700.93, 172, 1190.36, 517.68, 1106.05, 553.398, 1106.11, 553.367, 939.117, 193.922, 939.062, 193.906, 1045.48, 214.391, 617.188, 618, 544.719, 592.633, 572.141, 587.703, 623.656, 591.992, 656.25, 621, 835.359, 180.562, 829.719, 155.211, 856, 165.352, 884.633, 184.219, 882.508, 212.773, 879.219, 217.617, 850.68, 217.289, 1281.64, 398.719, 1253.03, 466.031, 1245.05, 415.891, 1242.92, 371.227, 1271.34, 341.828, 1231.85, 447.406, 905, 400.828, 900.039, 463.258, 874, 427.102, 873, 352.898, 905.992, 321.219, 869.969, 500.656, 888.094, 522.047, 870.977, 277.109, 900.102, 259.391, 858.82, 553.359, 875.906, 588.523, 847.688, 584.539, 877, 616.367, 830.852, 690.188, 820.688, 648.812, 829.688, 616.656, 806.172, 677.844, 800.727, 732.938, 834.398, 114.969, 809.352, 118.531, 817.719, 79.6562, 787.031, 79.9688, 788.812, 44, 762.609, 54.5, 747.953, 24.0469, 720.367, 43.9375, 686.742, 26.9609, 678.469, 48.1328, 647.117, 36.6172, 642.719, 68.1016, 610.508, 62.6406, 616.07, 100.906, 582.281, 100.609, 593.742, 130.352, 561.469, 142.242, 573.203, 171.406, 545.453, 176.43, 1207.22, 474.891, 1148.22, 510.5, 1081.7, 536.711, 996.648, 598.141, 944.031, 582.93, 1020.56, 556.75, 929.203, 609.062, 1217.71, 337.609, 1216.83, 288.32, 1175.89, 299.883, 1130.97, 244.578, 1114.95, 267.367, 1029.45, 240.211, 955.906, 219.062, 768.023, 720.117, 738.641, 759.141, 733.25, 735.93, 705.32, 763.898, 555.109, 528.094, 532.891, 542.977, 520.938, 475.227, 542, 447.43, 511.008, 411.711, 541, 365.867, 514.977, 328.438, 546.039, 287.219, 529.758, 208.102, 564.031, 216.32, 687.594, 739.109, 667.133, 753.398, 652.969, 714.977, 610.977, 714.977, 623.203, 690.344, 575.93, 685.773, 598.68, 651.523, 555.359, 648.562, 580.633, 618, 533.18, 609.477, 772.383, 595, 782.75, 619.008, 742.953, 621, 700.906, 596, 469.898, 575.883, 491.047, 602.102, 417.383, 582.195, 385.719, 556.844, 345.609, 560.258, 306.133, 532.656, 254.273, 526.508, 229.922, 494.047, 192.453, 485.289, 177.398, 436.367, 150.633, 431.797, 165.711, 382.203, 139.219, 381.422, 198.273, 324.43, 160.32, 329.617, 193.289, 290.844, 265.703, 282.539, 249.219, 256.492, 317.672, 229.711, 350.344, 247.281, 395.258, 205.844, 440.938, 221.102, 459.938, 192.898, 511.953, 182.906, 576.57, 176.281, 638.812, 210, 627.188, 171, 700.75, 171.992, 811.312, 214.008, 740.133, 211)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2), PackedInt32Array(3, 4, 5), PackedInt32Array(6, 7, 8), PackedInt32Array(9, 10, 11, 12, 13), PackedInt32Array(14, 15, 16, 17, 18, 19, 20), PackedInt32Array(21, 22, 23, 24, 25), PackedInt32Array(26, 23, 22), PackedInt32Array(27, 28, 29, 30, 31), PackedInt32Array(32, 29, 28, 33), PackedInt32Array(31, 30, 34, 35), PackedInt32Array(36, 32, 33, 37), PackedInt32Array(38, 36, 37), PackedInt32Array(37, 39, 40, 41, 42, 38), PackedInt32Array(43, 41, 40, 44), PackedInt32Array(45, 16, 15, 46, 47), PackedInt32Array(47, 46, 48, 49), PackedInt32Array(49, 48, 50, 51), PackedInt32Array(51, 50, 52, 53), PackedInt32Array(53, 52, 54, 55), PackedInt32Array(55, 54, 56, 57), PackedInt32Array(57, 56, 58, 59), PackedInt32Array(59, 58, 60, 61), PackedInt32Array(61, 60, 62, 63), PackedInt32Array(35, 34, 20, 19), PackedInt32Array(26, 22, 3, 64), PackedInt32Array(65, 64, 3, 5), PackedInt32Array(66, 65, 5, 67), PackedInt32Array(68, 69, 66, 67, 70), PackedInt32Array(37, 68, 70, 39), PackedInt32Array(25, 24, 71, 72), PackedInt32Array(72, 71, 73, 74), PackedInt32Array(74, 73, 75, 8), PackedInt32Array(8, 75, 76, 6), PackedInt32Array(6, 76, 77), PackedInt32Array(6, 77, 18, 17), PackedInt32Array(78, 43, 44, 79), PackedInt32Array(80, 78, 79, 81), PackedInt32Array(82, 11, 10, 83, 84), PackedInt32Array(85, 82, 84, 86), PackedInt32Array(87, 85, 86, 88), PackedInt32Array(89, 87, 88, 90), PackedInt32Array(91, 89, 90, 63, 62), PackedInt32Array(92, 80, 81, 93), PackedInt32Array(94, 92, 93, 95), PackedInt32Array(96, 94, 95, 97), PackedInt32Array(98, 96, 97, 99), PackedInt32Array(100, 98, 99, 101, 10), PackedInt32Array(102, 38, 42, 103, 104), PackedInt32Array(105, 102, 104, 13), PackedInt32Array(12, 105, 13), PackedInt32Array(10, 9, 100), PackedInt32Array(106, 10, 101, 107, 108), PackedInt32Array(109, 106, 108, 110), PackedInt32Array(111, 109, 110, 112), PackedInt32Array(113, 111, 112, 114), PackedInt32Array(115, 113, 114, 116), PackedInt32Array(117, 115, 116, 118), PackedInt32Array(119, 117, 118, 120, 121), PackedInt32Array(122, 119, 121, 123, 124), PackedInt32Array(125, 122, 124, 126), PackedInt32Array(127, 125, 126, 128), PackedInt32Array(90, 127, 128, 129), PackedInt32Array(90, 129, 63), PackedInt32Array(91, 62, 130), PackedInt32Array(131, 91, 130, 132, 133, 2), PackedInt32Array(14, 20, 134, 1), PackedInt32Array(1, 134, 135, 2), PackedInt32Array(2, 135, 131), PackedInt32Array(133, 132, 0), PackedInt32Array(133, 0, 2), PackedInt32Array(133, 2, 0)])
outlines = Array[PackedVector2Array]([PackedVector2Array(542, 172, 557, 140, 578, 98, 607, 59, 645, 32, 686, 22, 749, 19, 792, 40, 822, 77, 839, 113, 860, 162, 886.522, 179.481, 940, 189, 1046.78, 209.558, 1133, 240, 1219.78, 284.212, 1275.99, 339.38, 1286.83, 399.316, 1257.15, 469.117, 1193, 522, 1108, 558, 998, 603, 930, 614, 880, 621, 835, 693, 804, 737, 740, 764, 705, 769, 665, 758, 608, 719, 572, 689, 551, 651, 530, 614, 490, 607, 416, 587, 344, 565, 252, 531, 189, 489, 146, 434, 134, 381, 156, 327, 190, 287, 247, 252, 316, 225, 394, 201, 459, 188, 511, 178)])
agent_radius = 5.0

[node name="Overworld" type="Node2D"]
script = ExtResource("1_oh3n5")

[node name="Ground" type="ColorRect" parent="."]
custom_minimum_size = Vector2(1408, 792)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 1408.0
offset_bottom = 792.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
color = Color(0.160784, 0.254902, 0.211765, 1)

[node name="World" type="Sprite2D" parent="."]
self_modulate = Color(0.128645, 0.138355, 0.105974, 1)
position = Vector2(-76, 411)
rotation = -0.490035
scale = Vector2(0.9, 0.9)
texture = ExtResource("2_nlnpo")
offset = Vector2(704, 396)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="World"]
navigation_polygon = SubResource("NavigationPolygon_nlnpo")

[node name="StaticBody2D" type="StaticBody2D" parent="World/NavigationRegion2D" groups=["navigation_polygon_source_geometry_group"]]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(579, 171, 627, 166, 701, 167, 782, 171, 829, 175, 825, 157, 805, 121, 783, 83, 760, 59, 720, 49, 680, 53, 646, 72, 620, 104, 598, 133)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(568, 221, 639, 215, 740, 216, 811, 219, 847, 222, 866, 278, 868, 353, 869, 427, 865, 500, 854, 552, 844, 580, 772, 590, 701, 591, 624, 587, 576, 583, 560, 527, 547, 447, 546, 366, 551, 288)

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(524, 214, 510, 328, 506, 412, 516, 476, 528, 544, 538, 586, 471, 571, 387, 552, 308, 528, 233, 490, 182, 434, 171, 383, 202, 328, 268, 287, 352, 252, 442, 226)

[node name="CollisionPolygon2D4" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(885, 218, 905, 258, 911, 321, 910, 401, 905, 464, 893, 523, 882, 583, 943, 578, 1019, 552, 1080, 532, 1146, 506, 1204, 471, 1227.56, 444.695, 1240, 415, 1238, 373, 1214, 341, 1173, 304, 1113, 272, 1028, 245, 955, 224)

[node name="CollisionPolygon2D5" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(589, 623, 603, 649, 627, 687, 656, 711, 689, 734, 732, 731, 765, 716, 802, 675, 816, 647, 823, 622, 783, 624, 743, 626, 698, 626, 656, 626, 617, 623)

[node name="World2" type="Sprite2D" parent="World"]
modulate = Color(0.945098, 0.670588, 0.52549, 1)
texture = ExtResource("3_lq383")
offset = Vector2(704, 396)

[node name="SpawnPoint" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(449, 333)

[node name="SpawnPoint2" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(692, 208)

[node name="SpawnPoint3" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(857, 522)

[node name="SpawnPoint4" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(618, 654)

[node name="HouseLocations" type="Node2D" parent="."]
unique_name_in_owner = true
y_sort_enabled = true

[node name="h1" type="Node2D" parent="HouseLocations"]
position = Vector2(326, 701)

[node name="h2" type="Node2D" parent="HouseLocations"]
position = Vector2(254, 466)

[node name="h3" type="Node2D" parent="HouseLocations"]
position = Vector2(522, 480)

[node name="h4" type="Node2D" parent="HouseLocations"]
position = Vector2(489, 125)

[node name="h5" type="Node2D" parent="HouseLocations"]
position = Vector2(1009, 357)

[node name="h6" type="Node2D" parent="HouseLocations"]
position = Vector2(1018, 119)

[node name="h7" type="Node2D" parent="HouseLocations"]
position = Vector2(810, 311)

[node name="h8" type="Node2D" parent="HouseLocations"]
position = Vector2(803, 683)

[node name="h9" type="Node2D" parent="HouseLocations"]
position = Vector2(775, 554)

[node name="PathLine" type="Line2D" parent="."]
unique_name_in_owner = true
position = Vector2(-3, -3)
scale = Vector2(1.02671, 1)
width = 4.0
default_color = Color(1, 0, 0.0901961, 0.517647)
texture_mode = 2
joint_mode = 1
begin_cap_mode = 2
end_cap_mode = 2
sharp_limit = 20.0
round_precision = 23
antialiased = true
script = ExtResource("4_nlnpo")

[node name="Buttons" type="Control" parent="."]
custom_minimum_size = Vector2(1408, 792)
layout_mode = 3
anchors_preset = 0
offset_right = 1408.0
offset_bottom = 792.0
mouse_filter = 2

[node name="MarginContainer" type="MarginContainer" parent="Buttons"]
custom_minimum_size = Vector2(200, 100)
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -210.0
offset_bottom = 100.0
grow_horizontal = 0
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10

[node name="HBoxContainer" type="HBoxContainer" parent="Buttons/MarginContainer"]
custom_minimum_size = Vector2(200, 80)
layout_mode = 2
alignment = 2

[node name="CenterContainer2" type="CenterContainer" parent="Buttons/MarginContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Control" type="Control" parent="Buttons/MarginContainer/HBoxContainer/CenterContainer2"]
layout_mode = 2

[node name="PriorityButton" parent="Buttons/MarginContainer/HBoxContainer/CenterContainer2/Control" instance=ExtResource("4_w6wjv")]
unique_name_in_owner = true
custom_minimum_size = Vector2(200, 80)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -100.0
offset_top = -40.0
offset_right = 100.0
offset_bottom = 40.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(100, 40)
size_flags_horizontal = 3
text = "PRIORITY"
color_choice = 2

[node name="MarginContainer2" type="MarginContainer" parent="Buttons"]
custom_minimum_size = Vector2(200, 100)
layout_mode = 1
offset_right = 245.0
offset_bottom = 100.0
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10

[node name="HBoxContainer" type="HBoxContainer" parent="Buttons/MarginContainer2"]
custom_minimum_size = Vector2(200, 80)
layout_mode = 2
size_flags_horizontal = 0

[node name="CenterContainer2" type="CenterContainer" parent="Buttons/MarginContainer2/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Control" type="Control" parent="Buttons/MarginContainer2/HBoxContainer/CenterContainer2"]
layout_mode = 2

[node name="StartDayButton" parent="Buttons/MarginContainer2/HBoxContainer/CenterContainer2/Control" instance=ExtResource("4_w6wjv")]
unique_name_in_owner = true
custom_minimum_size = Vector2(200, 80)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -100.0
offset_top = -40.0
offset_right = 124.0
offset_bottom = 40.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(100, 40)
size_flags_horizontal = 3
text = "START DAY"
color_choice = 10

[node name="CenterContainer2" type="CenterContainer" parent="Buttons"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3

[node name="Control" type="Control" parent="Buttons/CenterContainer2"]
layout_mode = 2

[node name="GoButton" parent="Buttons/CenterContainer2/Control" instance=ExtResource("4_w6wjv")]
unique_name_in_owner = true
visible = false
custom_minimum_size = Vector2(300, 180)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -150.0
offset_top = -90.0
offset_right = 150.0
offset_bottom = 90.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(150, 150)
size_flags_horizontal = 3
theme_override_font_sizes/font_size = 108
text = "GO"
color_choice = 5

[node name="HoverNode" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(1082, 627)

[node name="NinePatchPanel" parent="HoverNode" instance=ExtResource("3_7cv3s")]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -194.0
offset_top = -99.0
offset_right = 323.0
offset_bottom = 162.0
grow_horizontal = 2
grow_vertical = 2
color_choice = 6

[node name="MarginContainer" type="MarginContainer" parent="HoverNode/NinePatchPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/margin_left = 15
theme_override_constants/margin_top = 15
theme_override_constants/margin_right = 15
theme_override_constants/margin_bottom = 15

[node name="VBoxContainer" type="VBoxContainer" parent="HoverNode/NinePatchPanel/MarginContainer"]
layout_mode = 2
mouse_filter = 2

[node name="HoverLabel" type="RichTextLabel" parent="HoverNode/NinePatchPanel/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
clip_contents = false
layout_mode = 2
mouse_filter = 2
theme_override_constants/outline_size = 20
theme_override_font_sizes/normal_font_size = 42
text = "ASD"
fit_content = true
horizontal_alignment = 1
vertical_alignment = 1

[node name="HoverLabel2" type="RichTextLabel" parent="HoverNode/NinePatchPanel/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 2
theme_override_constants/outline_size = 20
theme_override_font_sizes/normal_font_size = 48
text = "Elderly"
fit_content = true
horizontal_alignment = 1
vertical_alignment = 1

[node name="Popup" type="Control" parent="."]
unique_name_in_owner = true
visible = false
custom_minimum_size = Vector2(1408, 792)
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="NinePatchPanel" parent="Popup" instance=ExtResource("3_7cv3s")]
custom_minimum_size = Vector2(1260, 732)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -24.0
offset_top = -24.0
offset_right = 24.0
offset_bottom = 24.0
grow_horizontal = 2
grow_vertical = 2
color_choice = 7

[node name="MarginContainer" type="MarginContainer" parent="Popup/NinePatchPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 18
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 18

[node name="VBoxContainer" type="VBoxContainer" parent="Popup/NinePatchPanel/MarginContainer"]
layout_mode = 2

[node name="RichTextLabel" type="RichTextLabel" parent="Popup/NinePatchPanel/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/normal_font_size = 48
text = "Order to visit Houses"
fit_content = true
horizontal_alignment = 1
vertical_alignment = 1

[node name="HousePriorityHolder" type="VBoxContainer" parent="Popup/NinePatchPanel/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
alignment = 1
script = ExtResource("5_0bti1")

[node name="Control" type="Control" parent="Popup/NinePatchPanel"]
anchors_preset = 0
offset_left = 1087.0
offset_top = 15.0
offset_right = 1287.0
offset_bottom = 115.0
pivot_offset = Vector2(100, 50)
mouse_filter = 1

[node name="ClosePopup" parent="Popup/NinePatchPanel/Control" instance=ExtResource("4_w6wjv")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = -40.0
offset_bottom = -20.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(80, 40)
text = "CLOSE"
color_choice = 3

[connection signal="pressed_animation_finished" from="Buttons/MarginContainer/HBoxContainer/CenterContainer2/Control/PriorityButton" to="." method="_on_priority_button_pressed_animation_finished"]
[connection signal="pressed_animation_finished" from="Buttons/MarginContainer2/HBoxContainer/CenterContainer2/Control/StartDayButton" to="." method="_on_start_day_button_pressed_animation_finished"]
[connection signal="pressed_animation_finished" from="Buttons/CenterContainer2/Control/GoButton" to="." method="_on_go_button_pressed_animation_finished"]
[connection signal="pressed_animation_finished" from="Popup/NinePatchPanel/Control/ClosePopup" to="." method="_on_close_popup_pressed_animation_finished"]
