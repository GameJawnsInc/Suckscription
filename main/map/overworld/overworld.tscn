[gd_scene load_steps=9 format=3 uid="uid://ctwns2ijplrrh"]

[ext_resource type="Script" uid="uid://bdtnoj55ox1e" path="res://main/map/overworld/overworld.gd" id="1_oh3n5"]
[ext_resource type="Texture2D" uid="uid://d1p4kwni1clyh" path="res://assets/overworld/loopframe.png" id="2_nlnpo"]
[ext_resource type="PackedScene" uid="uid://cmuvm085e1ahy" path="res://main/ui/nine_patch_panel/nine_patch_panel.tscn" id="3_7cv3s"]
[ext_resource type="Texture2D" uid="uid://df04cbwgu6w00" path="res://assets/overworld/loopfront.png" id="3_lq383"]
[ext_resource type="Script" uid="uid://no8cuhtmmrdl" path="res://main/map/overworld/path_line.gd" id="4_nlnpo"]
[ext_resource type="PackedScene" uid="uid://ccaxx8d4y6wvp" path="res://main/ui/nine_patch_button/nine_patch_button.tscn" id="4_w6wjv"]
[ext_resource type="Script" uid="uid://crb0u8qnkbfst" path="res://main/map/overworld/house_priority_holder.gd" id="5_0bti1"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_nlnpo"]
vertices = PackedVector2Array(525.852, 474.258, 525.883, 474.461, 516.031, 411.469, 1187.75, 513.352, 1104.1, 548.789, 1104.21, 548.742, 938.25, 198.852, 938.109, 198.82, 1044.15, 219.219, 460.961, 197.812, 460.891, 197.82, 512.891, 187.82, 559.578, 645.844, 537.594, 612.148, 529.719, 583.297, 538.188, 544.203, 550.352, 529.977, 574.648, 581.781, 583.609, 614.867, 593.727, 653.039, 829.859, 117.07, 851.992, 168.703, 827.68, 147.719, 813.93, 116.469, 813.477, 82.3828, 1250.1, 416.781, 1276.45, 398.148, 1248.91, 462.938, 1236.13, 450.117, 900, 400.531, 895.07, 462.609, 879, 427.211, 878, 352.797, 900.992, 321.359, 874.938, 501.32, 882.969, 522.156, 863.203, 556.812, 884.922, 580.328, 875.953, 276.062, 895, 258.438, 873.992, 611.742, 826.633, 687.523, 825.867, 649.617, 827.5, 619.789, 835.992, 585.742, 810.211, 680.938, 797.469, 728.898, 537.008, 447.867, 536, 365.742, 520, 328.344, 541.094, 286.273, 522.211, 215.156, 561.953, 214.172, 548.898, 180.852, 1247.84, 369.461, 1266.71, 344.281, 821.562, 177.367, 791.047, 76.9531, 785.617, 48.0234, 765.219, 50, 746.898, 29.1094, 720.742, 38.8828, 687.453, 31.9375, 676.938, 43.2578, 649.211, 41.2734, 639.453, 64.2109, 614.078, 66.2266, 612.133, 97.8203, 586.531, 103.273, 588.703, 128.711, 565.938, 144.469, 578.859, 173.633, 882.742, 188.961, 895.273, 214.852, 853.93, 217.43, 1221.42, 334.227, 1213.87, 292.422, 1178.79, 295.75, 1129.05, 249.211, 1116.9, 262.75, 1030.9, 235.43, 956.344, 213.977, 771.148, 719.719, 737.312, 754.281, 733.352, 740.406, 705.633, 758.797, 812.203, 209.039, 782.219, 181.023, 740.258, 206, 700.648, 176.992, 638.453, 204.992, 626.688, 176, 440.531, 216.008, 396.43, 210.711, 348.68, 242.547, 319.219, 234.469, 263.406, 278.078, 251.469, 260.977, 687.094, 735.328, 669.258, 748.797, 650.719, 719.609, 614.008, 711, 619.398, 693.688, 579.844, 682.523, 1210.27, 478.992, 1148.82, 511.711, 949.008, 580.797, 1016.36, 556.109, 1083.05, 532.531, 995.242, 593.312, 928.398, 604.133, 773.188, 599.977, 783.406, 613.969, 700.812, 601, 742.703, 616, 656.383, 616, 622.188, 596.922, 617.102, 612.977, 196.602, 294.672, 194.547, 320.859, 164.641, 332.258, 160.422, 381.398, 144.438, 381.859, 155.477, 430.609, 172.789, 438.742, 181.227, 482.344, 226.844, 498.094, 249.969, 527.453, 304.258, 537.312, 346.812, 566.703, 384.438, 561.672, 421.383, 585.359, 469.688, 580.961, 477.812, 597.797)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2), PackedInt32Array(3, 4, 5), PackedInt32Array(6, 7, 8), PackedInt32Array(9, 10, 11), PackedInt32Array(12, 13, 14, 15, 16, 17, 18, 19), PackedInt32Array(20, 21, 22, 23, 24), PackedInt32Array(25, 26, 27, 28), PackedInt32Array(29, 30, 31, 32, 33), PackedInt32Array(34, 31, 30, 35), PackedInt32Array(36, 34, 35, 37), PackedInt32Array(33, 32, 38, 39), PackedInt32Array(37, 40, 41, 42, 43, 44, 36), PackedInt32Array(45, 42, 41, 46), PackedInt32Array(47, 16, 15, 0, 2), PackedInt32Array(48, 47, 2, 49), PackedInt32Array(50, 48, 49, 51), PackedInt32Array(52, 50, 51, 53), PackedInt32Array(26, 25, 54, 55), PackedInt32Array(56, 22, 21), PackedInt32Array(24, 23, 57, 58), PackedInt32Array(58, 57, 59, 60), PackedInt32Array(60, 59, 61), PackedInt32Array(62, 60, 61, 63, 64), PackedInt32Array(64, 63, 65, 66), PackedInt32Array(66, 65, 67, 68), PackedInt32Array(68, 67, 69, 70), PackedInt32Array(53, 70, 69, 71, 52), PackedInt32Array(72, 73, 39, 38, 74, 21), PackedInt32Array(55, 54, 75, 76), PackedInt32Array(76, 75, 77, 78), PackedInt32Array(78, 77, 79, 8), PackedInt32Array(8, 79, 80, 6), PackedInt32Array(6, 80, 81), PackedInt32Array(6, 81, 73, 72), PackedInt32Array(82, 45, 46, 83), PackedInt32Array(84, 82, 83, 85), PackedInt32Array(21, 74, 86, 56), PackedInt32Array(87, 56, 86, 88), PackedInt32Array(89, 87, 88, 90, 91), PackedInt32Array(91, 90, 52, 71), PackedInt32Array(11, 53, 51, 92), PackedInt32Array(93, 9, 11, 92, 94, 95), PackedInt32Array(95, 94, 96, 97), PackedInt32Array(98, 84, 85, 99), PackedInt32Array(100, 98, 99, 101), PackedInt32Array(102, 100, 101, 103), PackedInt32Array(19, 102, 103, 12), PackedInt32Array(28, 27, 3, 104), PackedInt32Array(105, 104, 3, 5), PackedInt32Array(106, 107, 108, 105, 5, 109, 110), PackedInt32Array(37, 106, 110, 40), PackedInt32Array(111, 44, 43, 112), PackedInt32Array(113, 111, 112, 114, 115), PackedInt32Array(116, 113, 115, 117), PackedInt32Array(118, 97, 96, 119, 120), PackedInt32Array(120, 119, 121, 122), PackedInt32Array(123, 122, 121, 124, 125), PackedInt32Array(125, 124, 126, 127), PackedInt32Array(127, 126, 128, 129), PackedInt32Array(129, 128, 130, 131), PackedInt32Array(131, 130, 132, 133), PackedInt32Array(133, 132, 14, 13), PackedInt32Array(18, 17, 116, 117)])
outlines = Array[PackedVector2Array]([PackedVector2Array(542, 172, 557, 140, 578, 98, 607, 59, 645, 32, 686, 22, 749, 19, 792, 40, 822, 77, 839, 113, 860, 162, 886.522, 179.481, 940, 189, 1046.78, 209.558, 1133, 240, 1219.78, 284.212, 1275.99, 339.38, 1286.83, 399.316, 1257.15, 469.117, 1193, 522, 1108, 558, 998, 603, 930, 614, 880, 621, 835, 693, 804, 737, 740, 764, 705, 769, 665, 758, 608, 719, 572, 689, 551, 651, 531.39, 620.956, 475.574, 607.553, 419.235, 595.131, 343.681, 576.236, 245.318, 536.359, 173.491, 489.229, 146, 434, 134, 381, 156, 327, 190, 287, 247, 252, 316, 225, 394, 201, 459, 188, 511, 178)])

[node name="Overworld" type="Node2D"]
script = ExtResource("1_oh3n5")

[node name="Ground" type="ColorRect" parent="."]
custom_minimum_size = Vector2(1408, 792)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 1408.0
offset_bottom = 792.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
color = Color(0.160784, 0.254902, 0.211765, 1)

[node name="World" type="Sprite2D" parent="."]
self_modulate = Color(0.128645, 0.138355, 0.105974, 1)
position = Vector2(-76, 411)
rotation = -0.490035
scale = Vector2(0.9, 0.9)
texture = ExtResource("2_nlnpo")
offset = Vector2(704, 396)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="World"]
navigation_polygon = SubResource("NavigationPolygon_nlnpo")

[node name="StaticBody2D" type="StaticBody2D" parent="World/NavigationRegion2D" groups=["navigation_polygon_source_geometry_group"]]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(591.164, 164.229, 627, 166, 701, 167, 782, 171, 813.255, 168.102, 817.243, 148.822, 805, 121, 783, 83, 760, 59, 720, 49, 680, 53, 646, 72, 620, 104, 598, 133)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(569.721, 223.312, 639, 215, 740, 216, 811, 219, 846.518, 226.144, 866, 278, 868, 353, 869, 427, 865, 500, 854, 552, 830.805, 576.666, 772, 590, 701, 591, 624, 587, 581.851, 573.575, 560, 527, 547, 447, 546, 366, 551, 288)

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(512.009, 225.269, 510, 328, 506, 412, 516, 476, 528, 544, 521.72, 572.982, 471, 571, 387, 552, 308, 528, 233, 490, 182, 434, 171, 383, 202, 328, 268, 287, 352, 252, 442, 226)

[node name="CollisionPolygon2D4" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(905.211, 224.711, 905, 258, 911, 321, 910, 401, 905, 464, 893, 523, 894.596, 570.396, 947.276, 570.792, 1013.03, 546.68, 1079.76, 523.09, 1144.93, 502.442, 1204, 471, 1227.56, 444.695, 1240, 415, 1238, 373, 1214, 341, 1173, 304, 1113, 272, 1028, 245, 955, 224)

[node name="CollisionPolygon2D5" type="CollisionPolygon2D" parent="World/NavigationRegion2D/StaticBody2D"]
polygon = PackedVector2Array(596.422, 624.164, 603, 649, 627, 687, 656, 711, 689.682, 725.544, 731.316, 730.122, 765.108, 711.628, 802, 675, 816, 647, 817.01, 628.495, 783, 624, 743, 626, 698, 626, 656, 626, 617, 623)

[node name="World2" type="Sprite2D" parent="World"]
modulate = Color(0.945098, 0.670588, 0.52549, 1)
texture = ExtResource("3_lq383")
offset = Vector2(704, 396)

[node name="SpawnPoints" type="Node2D" parent="."]

[node name="SpawnPoint" type="Node2D" parent="SpawnPoints"]
unique_name_in_owner = true
position = Vector2(449, 333)

[node name="SpawnPoint2" type="Node2D" parent="SpawnPoints"]
unique_name_in_owner = true
position = Vector2(692, 208)

[node name="SpawnPoint3" type="Node2D" parent="SpawnPoints"]
unique_name_in_owner = true
position = Vector2(857, 522)

[node name="SpawnPoint4" type="Node2D" parent="SpawnPoints"]
unique_name_in_owner = true
position = Vector2(618, 654)

[node name="HouseLocations" type="Node2D" parent="."]
unique_name_in_owner = true
y_sort_enabled = true

[node name="h1" type="Node2D" parent="HouseLocations"]
position = Vector2(326, 702)

[node name="h2" type="Node2D" parent="HouseLocations"]
position = Vector2(254, 466)

[node name="h3" type="Node2D" parent="HouseLocations"]
position = Vector2(522, 480)

[node name="h4" type="Node2D" parent="HouseLocations"]
position = Vector2(489, 125)

[node name="h5" type="Node2D" parent="HouseLocations"]
position = Vector2(1009, 357)

[node name="h6" type="Node2D" parent="HouseLocations"]
position = Vector2(1018, 119)

[node name="h7" type="Node2D" parent="HouseLocations"]
position = Vector2(810, 311)

[node name="h8" type="Node2D" parent="HouseLocations"]
position = Vector2(803, 683)

[node name="PathLine" type="Line2D" parent="."]
unique_name_in_owner = true
position = Vector2(-3, -3)
scale = Vector2(1.02671, 1)
width = 4.0
default_color = Color(1, 0, 0.0901961, 0.517647)
texture_mode = 2
joint_mode = 1
begin_cap_mode = 2
end_cap_mode = 2
sharp_limit = 20.0
round_precision = 23
antialiased = true
script = ExtResource("4_nlnpo")

[node name="Buttons" type="Control" parent="."]
custom_minimum_size = Vector2(1408, 792)
layout_mode = 3
anchors_preset = 0
offset_right = 1408.0
offset_bottom = 792.0
mouse_filter = 2

[node name="MarginContainer" type="MarginContainer" parent="Buttons"]
custom_minimum_size = Vector2(200, 100)
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -210.0
offset_bottom = 100.0
grow_horizontal = 0
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10

[node name="HBoxContainer" type="HBoxContainer" parent="Buttons/MarginContainer"]
custom_minimum_size = Vector2(200, 80)
layout_mode = 2
alignment = 2

[node name="CenterContainer2" type="CenterContainer" parent="Buttons/MarginContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Control" type="Control" parent="Buttons/MarginContainer/HBoxContainer/CenterContainer2"]
layout_mode = 2

[node name="PriorityButton" parent="Buttons/MarginContainer/HBoxContainer/CenterContainer2/Control" instance=ExtResource("4_w6wjv")]
unique_name_in_owner = true
custom_minimum_size = Vector2(200, 80)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -100.0
offset_top = -40.0
offset_right = 100.0
offset_bottom = 40.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(100, 40)
size_flags_horizontal = 3
text = "PRIORITY"
disable_on_pressed = true
color_choice = 5

[node name="MarginContainer2" type="MarginContainer" parent="Buttons"]
custom_minimum_size = Vector2(200, 100)
layout_mode = 1
offset_right = 245.0
offset_bottom = 100.0
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10

[node name="HBoxContainer" type="HBoxContainer" parent="Buttons/MarginContainer2"]
custom_minimum_size = Vector2(200, 80)
layout_mode = 2
size_flags_horizontal = 0

[node name="CenterContainer2" type="CenterContainer" parent="Buttons/MarginContainer2/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Control" type="Control" parent="Buttons/MarginContainer2/HBoxContainer/CenterContainer2"]
layout_mode = 2

[node name="StartDayButton" parent="Buttons/MarginContainer2/HBoxContainer/CenterContainer2/Control" instance=ExtResource("4_w6wjv")]
unique_name_in_owner = true
custom_minimum_size = Vector2(200, 80)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -100.0
offset_top = -40.0
offset_right = 124.0
offset_bottom = 40.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(100, 40)
size_flags_horizontal = 3
text = "START DAY"
disable_on_pressed = true
color_choice = 6

[node name="CenterContainer2" type="CenterContainer" parent="Buttons"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3

[node name="Control" type="Control" parent="Buttons/CenterContainer2"]
layout_mode = 2

[node name="GoButton" parent="Buttons/CenterContainer2/Control" instance=ExtResource("4_w6wjv")]
unique_name_in_owner = true
visible = false
custom_minimum_size = Vector2(300, 180)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -150.0
offset_top = -90.0
offset_right = 150.0
offset_bottom = 90.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(150, 150)
size_flags_horizontal = 3
theme_override_font_sizes/font_size = 108
text = "GO"
disable_on_pressed = true
color_choice = 5

[node name="HoverNode" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(1082, 627)

[node name="NinePatchPanel" parent="HoverNode" instance=ExtResource("3_7cv3s")]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -194.0
offset_top = -99.0
offset_right = 323.0
offset_bottom = 162.0
grow_horizontal = 2
grow_vertical = 2
color_choice = 6

[node name="MarginContainer" type="MarginContainer" parent="HoverNode/NinePatchPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/margin_left = 15
theme_override_constants/margin_top = 15
theme_override_constants/margin_right = 15
theme_override_constants/margin_bottom = 15

[node name="VBoxContainer" type="VBoxContainer" parent="HoverNode/NinePatchPanel/MarginContainer"]
layout_mode = 2
mouse_filter = 2

[node name="HoverLabel" type="RichTextLabel" parent="HoverNode/NinePatchPanel/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
clip_contents = false
layout_mode = 2
mouse_filter = 2
theme_override_constants/outline_size = 20
theme_override_font_sizes/normal_font_size = 42
text = "ASD"
fit_content = true
horizontal_alignment = 1
vertical_alignment = 1

[node name="HoverLabel2" type="RichTextLabel" parent="HoverNode/NinePatchPanel/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
mouse_filter = 2
theme_override_constants/outline_size = 20
theme_override_font_sizes/normal_font_size = 48
text = "Elderly"
fit_content = true
horizontal_alignment = 1
vertical_alignment = 1

[node name="PriorityPopup" type="Control" parent="."]
unique_name_in_owner = true
visible = false
custom_minimum_size = Vector2(1408, 792)
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="NinePatchPanel" parent="PriorityPopup" instance=ExtResource("3_7cv3s")]
custom_minimum_size = Vector2(1260, 732)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -24.0
offset_top = -24.0
offset_right = 24.0
offset_bottom = 24.0
grow_horizontal = 2
grow_vertical = 2
color_choice = 7

[node name="MarginContainer" type="MarginContainer" parent="PriorityPopup/NinePatchPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 18
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 18

[node name="VBoxContainer" type="VBoxContainer" parent="PriorityPopup/NinePatchPanel/MarginContainer"]
layout_mode = 2

[node name="RichTextLabel" type="RichTextLabel" parent="PriorityPopup/NinePatchPanel/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/normal_font_size = 48
text = "Order to visit Houses"
fit_content = true
horizontal_alignment = 1
vertical_alignment = 1

[node name="HousePriorityHolder" type="VBoxContainer" parent="PriorityPopup/NinePatchPanel/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
alignment = 1
script = ExtResource("5_0bti1")

[node name="Control" type="Control" parent="PriorityPopup/NinePatchPanel"]
anchors_preset = 0
offset_left = 1087.0
offset_top = 15.0
offset_right = 1287.0
offset_bottom = 115.0
pivot_offset = Vector2(100, 50)
mouse_filter = 1

[node name="ClosePopup" parent="PriorityPopup/NinePatchPanel/Control" instance=ExtResource("4_w6wjv")]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = -40.0
offset_bottom = -20.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(80, 40)
text = "CLOSE"
disable_on_pressed = true
color_choice = 3

[connection signal="pressed_animation_finished" from="Buttons/MarginContainer/HBoxContainer/CenterContainer2/Control/PriorityButton" to="." method="_on_priority_button_pressed_animation_finished"]
[connection signal="pressed_animation_finished" from="Buttons/MarginContainer2/HBoxContainer/CenterContainer2/Control/StartDayButton" to="." method="_on_start_day_button_pressed_animation_finished"]
[connection signal="pressed_animation_finished" from="Buttons/CenterContainer2/Control/GoButton" to="." method="_on_go_button_pressed_animation_finished"]
[connection signal="pressed_animation_finished" from="PriorityPopup/NinePatchPanel/Control/ClosePopup" to="." method="_on_close_popup_pressed_animation_finished"]
